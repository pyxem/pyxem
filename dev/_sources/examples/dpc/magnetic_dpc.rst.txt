
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/dpc/magnetic_dpc.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_dpc_magnetic_dpc.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_dpc_magnetic_dpc.py:


Magnetic DPC
============

This example shows a basic workflow for doing magnetic DPC on a simple simulated test
dataset. The dataset consists of alternating stripes of switching magnetic fields resulting
in reversals of the direction of the magnetic field.

This is a generalization of some of the real datasets which are more completely analyzed in
the longer Demo Notebooks.

.. GENERATED FROM PYTHON SOURCE LINES 12-21

.. code-block:: Python


    import pyxem as pxm

    s = pxm.data.simulated_stripes()

    s_beam_pos = s.get_direct_beam_position(
        method="center_of_mass", half_square_width=20
    )  # Just the center of the DP





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/hyperspy/misc/utils.py:72: VisibleDeprecationWarning: `_get_block_pattern` has moved to `hyperspy.misc.dask_utils`. It is for internal use only and may be removed in the future.
      warnings.warn(
      0%|          | 0/76 [00:00<?, ?it/s]     36%|███▌      | 27/76 [00:00<00:00, 220.00it/s]     66%|██████▌   | 50/76 [00:00<00:00, 220.99it/s]     96%|█████████▌| 73/76 [00:00<00:00, 214.14it/s]    100%|██████████| 76/76 [00:00<00:00, 220.88it/s]




.. GENERATED FROM PYTHON SOURCE LINES 22-26

Visualizing the Shifts
-----------------------
The shifts can be visualized using the :meth:`plot` method which shows both the
x and y shifts in a single plot.

.. GENERATED FROM PYTHON SOURCE LINES 26-29

.. code-block:: Python


    s_beam_pos.plot()




.. image-sg:: /examples/dpc/images/sphx_glr_magnetic_dpc_001.png
   :alt: x-shift, y-shift
   :srcset: /examples/dpc/images/sphx_glr_magnetic_dpc_001.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    [<Axes: title={'center': 'x-shift'}, xlabel='x axis (px)', ylabel='y axis (px)'>, <Axes: title={'center': 'y-shift'}, xlabel='x axis (px)', ylabel='y axis (px)'>]



.. GENERATED FROM PYTHON SOURCE LINES 30-33

Visualizing the Shifts as color signal
--------------------------------------
To plot the shifts in one signal, with the color showing the magnitude and direction.

.. GENERATED FROM PYTHON SOURCE LINES 33-37

.. code-block:: Python


    s_magnitude_phase = s_beam_pos.get_magnitude_phase_signal()
    s_magnitude_phase.plot()




.. image-sg:: /examples/dpc/images/sphx_glr_magnetic_dpc_002.png
   :alt:  Signal
   :srcset: /examples/dpc/images/sphx_glr_magnetic_dpc_002.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 38-41

Plotting Magnitude and Direction
--------------------------------
Since each probe position is a vector, we can plot the magnitude and phase (direction).

.. GENERATED FROM PYTHON SOURCE LINES 41-48

.. code-block:: Python


    s_magnitude = s_beam_pos.get_magnitude_signal()
    s_magnitude.plot()

    s_phase = s_beam_pos.get_phase_signal()
    s_phase.plot()




.. rst-class:: sphx-glr-horizontal


    *

      .. image-sg:: /examples/dpc/images/sphx_glr_magnetic_dpc_003.png
         :alt: Magnitude of  Signal
         :srcset: /examples/dpc/images/sphx_glr_magnetic_dpc_003.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/dpc/images/sphx_glr_magnetic_dpc_004.png
         :alt:  Signal
         :srcset: /examples/dpc/images/sphx_glr_magnetic_dpc_004.png
         :class: sphx-glr-multi-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none

      0%|          | 0/51 [00:00<?, ?it/s]    100%|██████████| 51/51 [00:00<00:00, 2877.18it/s]




.. GENERATED FROM PYTHON SOURCE LINES 49-52

Plotting the bivariate histogram
--------------------------------
The shifts vectors can also be visualized as a histogram

.. GENERATED FROM PYTHON SOURCE LINES 52-57

.. code-block:: Python


    s_hist = s_beam_pos.get_bivariate_histogram()
    s_hist.plot()





.. image-sg:: /examples/dpc/images/sphx_glr_magnetic_dpc_005.png
   :alt: Bivariate histogram of  Signal
   :srcset: /examples/dpc/images/sphx_glr_magnetic_dpc_005.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 58-62

Plotting with matplotlib
------------------------
Pyxem also provides a convenient way to plot the magnitude and phase of the beam shifts
using matplotlib. This is useful for creating publication-ready figures.

.. GENERATED FROM PYTHON SOURCE LINES 62-90

.. code-block:: Python


    import matplotlib.pyplot as plt
    from pyxem.utils.plotting import plot_beam_shift_color

    fig, axs = plt.subplots(1, 1)
    inset = axs.inset_axes([0.06, 0.57, 0.2, 0.2])
    plot_beam_shift_color(
        s_beam_pos,
        phase_rotation=45,
        autolim=True,
        autolim_sigma=3,
        ax_indicator=inset,
        ax=axs,
    )

    fig, axs = plt.subplots(1, 1)
    inset = axs.inset_axes([0.06, 0.57, 0.2, 0.2])
    plot_beam_shift_color(
        s_beam_pos,
        phase_rotation=45,
        autolim=True,
        autolim_sigma=3,
        ax_indicator=inset,
        only_phase=True,
        ax=axs,
    )

    # sphinx_gallery_thumbnail_number = 3



.. rst-class:: sphx-glr-horizontal


    *

      .. image-sg:: /examples/dpc/images/sphx_glr_magnetic_dpc_006.png
         :alt: magnetic dpc
         :srcset: /examples/dpc/images/sphx_glr_magnetic_dpc_006.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/dpc/images/sphx_glr_magnetic_dpc_007.png
         :alt: magnetic dpc
         :srcset: /examples/dpc/images/sphx_glr_magnetic_dpc_007.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/dpc/images/sphx_glr_magnetic_dpc_008.png
         :alt: x-shift, y-shift, x-shift
         :srcset: /examples/dpc/images/sphx_glr_magnetic_dpc_008.png
         :class: sphx-glr-multi-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    <Figure size 640x480 with 1 Axes>




.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 6.951 seconds)


.. _sphx_glr_download_examples_dpc_magnetic_dpc.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: magnetic_dpc.ipynb <magnetic_dpc.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: magnetic_dpc.py <magnetic_dpc.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: magnetic_dpc.zip <magnetic_dpc.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
